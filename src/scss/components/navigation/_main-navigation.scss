@use "../../abstracts/" as *;

/* Mobile Menu Toggle Buttons */
.menu-toggle {
	@include button-unset;

	display: flex;
	gap: $space-1;
	align-items: center;
	line-height: 1;

	.mrw-svg {
		width: 1em;
		height: 1em;
	}
}

/* Show appropriate menus for breakpoints */
.main-navigation__bar {
	display: none !important;
}
@include mq($bp--menu) {
	.menu-toggle,
	.main-navigation__dialog {
		display: none !important;
	}

	.main-navigation__bar {
		display: flex !important;
	}
}

/* Universal Main Menu Styles */
.main-menu {
	align-items: stretch;

	li {
		position: relative;
		display: flex;
		justify-content: stretch;
		flex-wrap: wrap;
	}

	/* Buttons and Links */
	button {
		@include button-unset;
	}

	a,
	button {
		display: flex;
		align-items: center;
		width: 100%;
		gap: 0.4375em;
		padding: $space-3 $space-5;
		text-decoration: none;
		color: currentColor;
	}

	a:hover {
		text-decoration: underline;
	}

	/* SVG Drop-down Indicators */
	svg {
		flex: 0 0 0.5em;
		transform: rotate(90deg);
	}

	[aria-expanded="true"] svg {
		transform: rotate(90deg) scaleX(-1);
	}

	path {
		fill: currentColor;
	}

	/* Only top-level items */
	> li > a,
	button {
		line-height: 1;
	}

	/* Current Items */
	.current_page_item > *,
	.current-menu-item > * {
		font-weight: 700;
	}
}

/* Mobile Container */
.main-navigation__dialog {
	display: block;
	visibility: hidden;
	width: 90vw;
	height: 100vh;
	inset-block: 0;
	inset-inline-start: auto;
	inset-inline-end: 0;
	transform: translateX(100%);
	max-width: none !important;
	max-height: none !important;
	transition:
		transform 0.5s ease-in-out,
		visibility 0s 0.5s;
	border: 0;
	background-color: $primary;
	z-index: 9999;

	&[open] {
		visibility: visible;
		transform: translateX(0);
		transition: transform 0.5s ease-in-out;
	}

	.menu-toggle {
		float: right;
		padding: $space-2;
	}

	.sub-menu {
		flex: 0 0 100%;
		position: static;
		height: 0;
	}

	[aria-expanded="true"] + .sub-menu {
		height: auto;
	}
}

/* Desktop Menu */
.main-navigation__bar {
	position: static;

	.main-menu {
		position: static;
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		background-color: transparent;

		.sub-menu {
			top: calc(100% + $space-4);
			z-index: 999;
			background-color: $base;
			box-shadow: $box-shadow;
			border-radius: $border-radius;
			min-width: 14em;
		}
	}
}

/* No-JS Fallback */
.main-menu.no-js {
	li:hover > .sub-menu,
	li:focus-within > .sub-menu,
	a:focus + .sub-menu {
		height: auto;
	}
	.sub-menu {
		margin-top: 0;
	}
}
